<!DOCTYPE html>
<html>
<head>
    <title>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –±–∞–Ω–Ω–µ—Ä–∞ - BannerFlow</title>
    <link rel="stylesheet" href="/static/bannerflow_app/css/style.css">
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .banner-box { border: 3px solid #007bff; padding: 20px; margin: 20px 0; background: #f8f9fa; }
        .btn-export { 
            background: #28a745; 
            color: white; 
            padding: 15px 30px; 
            text-decoration: none; 
            border-radius: 5px; 
            font-size: 18px;
            display: inline-block;
            margin: 20px 0;
            border: none;
        }
        .btn-export:hover { background: #218838; }
        .btn-back { 
            background: #6c757d; 
            color: white; 
            padding: 10px 20px; 
            text-decoration: none;
            border-radius: 5px;
            margin-left: 10px;
        }
        .btn-back:hover { background: #5a6268; }
        .info-box { background: #e9ecef; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .success-box { background: #d4edda; color: #155724; padding: 15px; border-radius: 5px; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –±–∞–Ω–Ω–µ—Ä–∞</h1>
        
        {% if banner %}
        <div class="success-box">
            <strong>‚úÖ –ë–∞–Ω–Ω–µ—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</strong> –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Godot Engine.
        </div>
        
        <div class="info-box">
            <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> {{ banner.name }}</p>
            <p><strong>–®–∞–±–ª–æ–Ω:</strong> {{ banner.template.name }}</p>
            <p><strong>–ò–≥—Ä–∞:</strong> {{ banner.game_data.game_name }}</p>
            <p><strong>–ò–≥—Ä–æ–∫:</strong> {{ banner.game_data.player_name }}</p>
            <p><strong>–°—á—ë—Ç:</strong> {{ banner.game_data.score }}</p>
            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> {{ banner.game_data.level }}</p>
            <p><strong>ID –±–∞–Ω–Ω–µ—Ä–∞:</strong> {{ banner.id }}</p>
        </div>
        
        <div class="banner-box">
            <h3>–ë–∞–Ω–Ω–µ—Ä:</h3>
            {{ banner.html_content|safe }}
        </div>
        
        <div style="margin: 30px 0;">
            <h3>üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ Godot:</h3>
            
            <!-- –û–î–ù–ê –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –∫–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
            <a href="/banner/export/{{ banner.id }}/" class="btn-export" id="downloadBtn">
                ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –¥–ª—è Godot (.gd)
            </a>
            
            <a href="/generator/" class="btn-back">‚Üê –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±–∞–Ω–Ω–µ—Ä</a>
            
            <p style="margin-top: 10px; color: #666;">
                <small>–§–∞–π–ª –±—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º <code>.gd</code> –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Godot Engine</small>
            </p>
        </div>
        
        <div class="info-box">
            <h4>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h4>
            <ol>
                <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ, —á—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª <code>banner_{{ banner.id }}.gd</code></li>
                <li>–î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª –≤ –ø—Ä–æ–µ–∫—Ç Godot Engine</li>
                <li>–°–æ–∑–¥–∞–π—Ç–µ Control-—É–∑–µ–ª –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç</li>
                <li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏</li>
            </ol>
        </div>
        
        <script>
            // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            console.log("=== Banner Preview Debug ===");
            console.log("Banner ID:", {{ banner.id }});
            console.log("Export URL:", "/banner/export/{{ banner.id }}/");
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏
            document.getElementById('downloadBtn').addEventListener('click', function(e) {
                console.log("–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞! URL:", this.href);
                console.log("–ë–∞–Ω–Ω–µ—Ä ID –∏–∑ URL:", {{ banner.id }});
            });
        </script>
        
        {% else %}
        <div class="info-box" style="background: #f8d7da; color: #721c24;">
            <strong>‚ùå –ë–∞–Ω–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω!</strong>
        </div>
        <a href="/generator/" class="btn-back">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—É</a>
        {% endif %}
    </div>
</body>
</html>
